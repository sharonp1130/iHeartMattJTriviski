package help.me.orm.entity;
// Generated Nov 26, 2015 6:04:16 PM by Hibernate Tools 4.3.1.Final

import java.util.Date;
import java.util.HashSet;
import java.util.Set;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.persistence.UniqueConstraint;

import org.apache.commons.validator.EmailValidator;
import org.apache.commons.validator.ValidatorException;
import org.hibernate.annotations.Generated;
import org.hibernate.annotations.GenerationTime;

/**
 * User generated by hbm2java
 */
/**
 * @author triviski
 *
 */
@SuppressWarnings("serial")
@Entity
@Table(name = "user", uniqueConstraints = @UniqueConstraint(columnNames = "email") )
public class User implements java.io.Serializable {

	private int userId;
	private Info info;
	private Settings settings;
	private String email;
    private Set<Location> locations = new HashSet<Location>(0);
    private Set<License> licenses = new HashSet<License>(0);

	
	private Date createdAt;
	private Date updatedAt;

	/**
	 * 
	 */
	public User() {
	}

	/**
	 * @param userId
	 * @param info
	 * @param settings
	 * @param email
	 * @throws ValidatorException
	 */
	public User(int userId, Info info, Settings settings, String email) throws ValidatorException {
		this.userId = userId;
		this.info = info;
		this.settings = settings;
		
		this.setEmail(email);

	}

	/**
	 * @param userId
	 * @param info
	 * @param settings
	 * @param email
	 * @param createdAt
	 * @param updatedAt
	 * @throws ValidatorException
	 */
	public User(int userId, Info info, Settings settings, String email, Date createdAt, Date updatedAt) throws ValidatorException {
		this.userId = userId;
		this.info = info;
		this.settings = settings;
		this.createdAt = createdAt;
		this.updatedAt = updatedAt;
		
		this.setEmail(email);
	}

    @Id 
    @GeneratedValue(strategy=GenerationType.IDENTITY)
	@Column(name = "userId", unique = true, nullable = false)
	public int getUserId() {
		return this.userId;
	}

	public void setUserId(int userId) {
		this.userId = userId;
	}

	@Column(name = "info", nullable = false)
	public Info getInfo() {
		return this.info;
	}

	public void setInfo(Info info) {
		this.info = info;
	}

	@Column(name = "settings", nullable = false)
	public Settings getSettings() {
		return this.settings;
	}

	public void setSettings(Settings settings) {
		this.settings = settings;
	}

	@Column(name = "email", unique = true, nullable = false, length = 50)
	public String getEmail() {
		return this.email;
	}

	/**
	 * @param email
	 * @throws ValidatorException
	 */
	public void setEmail(String email) throws ValidatorException {
		if (!EmailValidator.getInstance().isValid(email)) {
			throw new ValidatorException("Email address is invalid.");
		}
		
		this.email = email;
	}

    @JoinColumn(name = "locationId")
    @OneToMany(fetch=FetchType.LAZY)
    public Set<Location> getLocations() {
        return this.locations;
    }
    
    public void setLocations(Set<Location> locations) {
        this.locations = locations;
    }

    @JoinColumn(name = "licenseId")
    @OneToMany(fetch=FetchType.LAZY)
    public Set<License> getLicenses() {
        return this.licenses;
    }
    
    public void setLicenses(Set<License> licenses) {
        this.licenses = licenses;
    }
	
	@Generated(GenerationTime.INSERT) 
	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "created_at", length = 19, insertable=false, updatable=false)
	public Date getCreatedAt() {
		return this.createdAt;
	}

	public void setCreatedAt(Date createdAt) {
		this.createdAt = createdAt;
	}

	@Generated(GenerationTime.ALWAYS) 
	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "updated_at", length = 19, insertable=false, updatable=true)
	public Date getUpdatedAt() {
		return this.updatedAt;
	}

	public void setUpdatedAt(Date updatedAt) {
		this.updatedAt = updatedAt;
	}

}
